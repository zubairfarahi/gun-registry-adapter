
# OpenAI API Key for Model B (GPT-4o mini)
OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# Anthropic API Key for Model C (Claude for self-healing)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Model A (Perception/OCR) Configuration

# Images with OCR confidence below this will trigger low confidence error
MODEL_A_CONFIDENCE_THRESHOLD=0.8

# Images with quality below this will be rejected
IMAGE_QUALITY_THRESHOLD=0.5

# Enable tamper detection
ENABLE_TAMPER_DETECTION=true

# Model B (Reasoning) Configuration

# Applicants with risk score above this are flagged
MODEL_B_RISK_THRESHOLD=0.7

# Linkage confidence below this is considered "no match"
LINKAGE_CONFIDENCE_THRESHOLD=0.7

# Linkage between these values requires manual review
LINKAGE_MANUAL_REVIEW_MIN=0.7
LINKAGE_MANUAL_REVIEW_MAX=0.9

# OpenAI model name
OPENAI_MODEL=gpt-4o-mini

# OpenAI temperature (0.0 = deterministic, 1.0 = creative)
OPENAI_TEMPERATURE=0.0

# OpenAI max tokens
OPENAI_MAX_TOKENS=1000

# Model C (Self-Healing) Configuration

# Enable self-healing system
SELF_HEALING_ENABLED=true

# Auto-apply fixes (true = automatic, false = manual review)
# CAUTION: Only enable in development! Keep false in production
AUTO_APPLY_FIXES=false

# Minimum confidence for auto-applying fixes (0.0-1.0)
# Only applies if AUTO_APPLY_FIXES=true
SELF_HEALING_CONFIDENCE_THRESHOLD=0.9

# Claude model for self-healing
CLAUDE_MODEL=claude-sonnet-4-5-20250929

# Claude max tokens for fix proposals
CLAUDE_MAX_TOKENS=4000

# Claude temperature (0.0 = deterministic)
CLAUDE_TEMPERATURE=0.0

# Database Configuration

# Main database path (SQLite)
DATABASE_PATH=data/registry.db

# Self-healing history database path
SELF_HEALING_DB_PATH=data/self_healing.db

# Enable database encryption (recommended for production)
DATABASE_ENCRYPTION_ENABLED=false

# =============================================================================
# n8n Integration
# =============================================================================

# n8n webhook URL (local development)
N8N_WEBHOOK_URL=http://localhost:5678/webhook/eligibility

# n8n basic auth credentials
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=changeme

# n8n instance URL
N8N_INSTANCE_URL=http://localhost:5678

# =============================================================================
# API Server Configuration
# =============================================================================

# FastAPI host
API_HOST=0.0.0.0

# FastAPI port
API_PORT=8000

# Number of Uvicorn workers
API_WORKERS=2

# API CORS allowed origins (comma-separated)
API_CORS_ORIGINS=http://localhost:3000,http://localhost:5678

# API rate limiting (requests per minute)
API_RATE_LIMIT=100

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# CRITICAL: NEVER set this to true in production!
# Logs PII (names, DOBs, addresses) - ONLY for debugging
LOG_PII=false

# Log file path
LOG_FILE_PATH=logs/audit.log

# Log format (json or text)
LOG_FORMAT=json

# Enable console logging
LOG_CONSOLE=true

# =============================================================================
# Testing & Development
# =============================================================================

# Enable test mode (uses mock data, skips API calls)
TEST_MODE=false

# Use synthetic NICS records (generated from aggregates)
USE_SYNTHETIC_NICS=true

# Path to synthetic NICS data
SYNTHETIC_NICS_PATH=data/processed/synthetic_nics_records.json

# Enable debug mode
DEBUG=false

# =============================================================================
# Data Paths
# =============================================================================

# Raw data directory
RAW_DATA_PATH=data/raw

# Processed data directory
PROCESSED_DATA_PATH=data/processed

# Synthetic driver licenses path
SYNTHETIC_CARDS_PATH=data/raw/synthetic_cards

# NICS data path
NICS_DATA_PATH=data/raw/nics_data/nics-firearm-background-checks.csv

# =============================================================================
# Security & Privacy
# =============================================================================

# Enable PII hashing in logs
ENABLE_PII_HASHING=true

# Audit log retention period (days)
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years (regulatory requirement)

# Enable request/response encryption
ENABLE_ENCRYPTION=false

# Secret key for encryption (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-generate-with-openssl

# =============================================================================
# Feature Flags
# =============================================================================

# Enable Model A (OCR)
ENABLE_MODEL_A=true

# Enable Model B (Risk Assessment)
ENABLE_MODEL_B=true

# Enable Model C (Self-Healing)
ENABLE_MODEL_C=true

# Enable linkage logic
ENABLE_LINKAGE=true

# Enable metrics collection
ENABLE_METRICS=true

# Enable health check endpoint
ENABLE_HEALTH_CHECK=true

# =============================================================================
# Performance & Optimization
# =============================================================================

# OCR processing timeout (seconds)
OCR_TIMEOUT_SECONDS=30

# API request timeout (seconds)
API_REQUEST_TIMEOUT=60

# Cache TTL for OCR results (seconds)
CACHE_TTL_SECONDS=3600

# Enable result caching
ENABLE_CACHING=false

# Max file upload size (MB)
MAX_FILE_UPLOAD_SIZE_MB=10

# =============================================================================
# Monitoring & Observability
# =============================================================================

# Enable Prometheus metrics endpoint
ENABLE_PROMETHEUS=false

# Prometheus port
PROMETHEUS_PORT=9090

# Enable application performance monitoring
ENABLE_APM=false

# Sentry DSN (for error tracking)
SENTRY_DSN=

# =============================================================================
# Docker Configuration
# =============================================================================

# n8n user for Docker Compose
N8N_USER=admin

# n8n password for Docker Compose
N8N_PASSWORD=changeme


